/**
 * @license
 * Copyright Andrey Chalkin <L2jLiga@gmail.com> (https://github.com/L2jLiga). All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/L2jLiga/fastify-decorators/blob/master/LICENSE
 */
const scopedInstances = new WeakMap();
export const defaultScope = {};
export const dependencyScopeManager = {
    add(scope, dependency, instance) {
        const instances = scopedInstances.get(scope) || new Map();
        instances.set(dependency, instance);
        scopedInstances.set(scope, instances);
    },
    has(scope, dependency) {
        return scopedInstances.has(scope) && scopedInstances.get(scope).has(dependency);
    },
    get(scope, dependency) {
        if (!scopedInstances.has(scope))
            return;
        const instances = scopedInstances.get(scope);
        return instances.get(dependency);
    },
    clear(scope) {
        scopedInstances.delete(scope);
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVwZW5kZW5jeS1zY29wZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9kZWNvcmF0b3JzL2hlbHBlcnMvZGVwZW5kZW5jeS1zY29wZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7O0dBTUc7QUFPSCxNQUFNLGVBQWUsR0FBRyxJQUFJLE9BQU8sRUFBdUQsQ0FBQztBQUUzRixNQUFNLENBQUMsTUFBTSxZQUFZLEdBQUcsRUFBcUIsQ0FBQztBQUVsRCxNQUFNLENBQUMsTUFBTSxzQkFBc0IsR0FBRztJQUNwQyxHQUFHLENBQUMsS0FBc0IsRUFBRSxVQUFnQyxFQUFFLFFBQWlCO1FBQzdFLE1BQU0sU0FBUyxHQUFHLGVBQWUsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksSUFBSSxHQUFHLEVBQWlDLENBQUM7UUFDekYsU0FBUyxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDcEMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDeEMsQ0FBQztJQUVELEdBQUcsQ0FBQyxLQUFzQixFQUFFLFVBQWdDO1FBQzFELE9BQU8sZUFBZSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSyxlQUFlLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBd0MsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDMUgsQ0FBQztJQUVELEdBQUcsQ0FBQyxLQUFzQixFQUFFLFVBQWdDO1FBQzFELElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQztZQUFFLE9BQU87UUFDeEMsTUFBTSxTQUFTLEdBQUcsZUFBZSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQXVDLENBQUM7UUFDbkYsT0FBTyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ25DLENBQUM7SUFDRCxLQUFLLENBQUMsS0FBc0I7UUFDMUIsZUFBZSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNoQyxDQUFDO0NBQ0YsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBbmRyZXkgQ2hhbGtpbiA8TDJqTGlnYUBnbWFpbC5jb20+IChodHRwczovL2dpdGh1Yi5jb20vTDJqTGlnYSkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9naXRodWIuY29tL0wyakxpZ2EvZmFzdGlmeS1kZWNvcmF0b3JzL2Jsb2IvbWFzdGVyL0xJQ0VOU0VcbiAqL1xuXG5pbXBvcnQgeyBGYXN0aWZ5SW5zdGFuY2UsIEZhc3RpZnlSZXF1ZXN0IH0gZnJvbSAnZmFzdGlmeSc7XG5pbXBvcnQgeyBDb25zdHJ1Y3RvciB9IGZyb20gJy4vaW5qZWN0LWRlcGVuZGVuY2llcy5qcyc7XG5cbmV4cG9ydCB0eXBlIERlcGVuZGVuY3lTY29wZSA9IEZhc3RpZnlJbnN0YW5jZSB8IEZhc3RpZnlSZXF1ZXN0O1xuXG5jb25zdCBzY29wZWRJbnN0YW5jZXMgPSBuZXcgV2Vha01hcDxEZXBlbmRlbmN5U2NvcGUsIE1hcDxDb25zdHJ1Y3Rvcjx1bmtub3duPiwgdW5rbm93bj4+KCk7XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0U2NvcGUgPSB7fSBhcyBEZXBlbmRlbmN5U2NvcGU7XG5cbmV4cG9ydCBjb25zdCBkZXBlbmRlbmN5U2NvcGVNYW5hZ2VyID0ge1xuICBhZGQoc2NvcGU6IERlcGVuZGVuY3lTY29wZSwgZGVwZW5kZW5jeTogQ29uc3RydWN0b3I8dW5rbm93bj4sIGluc3RhbmNlOiB1bmtub3duKTogdm9pZCB7XG4gICAgY29uc3QgaW5zdGFuY2VzID0gc2NvcGVkSW5zdGFuY2VzLmdldChzY29wZSkgfHwgbmV3IE1hcDxDb25zdHJ1Y3Rvcjx1bmtub3duPiwgdW5rbm93bj4oKTtcbiAgICBpbnN0YW5jZXMuc2V0KGRlcGVuZGVuY3ksIGluc3RhbmNlKTtcbiAgICBzY29wZWRJbnN0YW5jZXMuc2V0KHNjb3BlLCBpbnN0YW5jZXMpO1xuICB9LFxuXG4gIGhhcyhzY29wZTogRGVwZW5kZW5jeVNjb3BlLCBkZXBlbmRlbmN5OiBDb25zdHJ1Y3Rvcjx1bmtub3duPik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBzY29wZWRJbnN0YW5jZXMuaGFzKHNjb3BlKSAmJiAoc2NvcGVkSW5zdGFuY2VzLmdldChzY29wZSkgYXMgTWFwPENvbnN0cnVjdG9yPHVua25vd24+LCB1bmtub3duPikuaGFzKGRlcGVuZGVuY3kpO1xuICB9LFxuXG4gIGdldChzY29wZTogRGVwZW5kZW5jeVNjb3BlLCBkZXBlbmRlbmN5OiBDb25zdHJ1Y3Rvcjx1bmtub3duPik6IHVua25vd24gfCB1bmRlZmluZWQge1xuICAgIGlmICghc2NvcGVkSW5zdGFuY2VzLmhhcyhzY29wZSkpIHJldHVybjtcbiAgICBjb25zdCBpbnN0YW5jZXMgPSBzY29wZWRJbnN0YW5jZXMuZ2V0KHNjb3BlKSBhcyBNYXA8Q29uc3RydWN0b3I8dW5rbm93bj4sIHVua25vd24+O1xuICAgIHJldHVybiBpbnN0YW5jZXMuZ2V0KGRlcGVuZGVuY3kpO1xuICB9LFxuICBjbGVhcihzY29wZTogRGVwZW5kZW5jeVNjb3BlKTogdm9pZCB7XG4gICAgc2NvcGVkSW5zdGFuY2VzLmRlbGV0ZShzY29wZSk7XG4gIH0sXG59O1xuIl19