/**
 * @license
 * Copyright Andrey Chalkin <L2jLiga@gmail.com> (https://github.com/L2jLiga). All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/L2jLiga/fastify-decorators/blob/master/LICENSE
 */
import { classLoaderFactory } from '../decorators/helpers/inject-dependencies.js';
import { _injectablesHolder } from '../registry/_injectables-holder.js';
import { CREATOR } from '../symbols/index.js';
export function getInstanceByToken(token) {
    const classLoader = classLoaderFactory(_injectablesHolder);
    const injectable = _injectablesHolder.get(token);
    verifyInjectable(token, injectable);
    return injectable[CREATOR].register(classLoader);
}
function verifyInjectable(token, injectable) {
    if (!injectable)
        throw new Error(`Injectable not found for token "${token.toString()}"`);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0LWluc3RhbmNlLWJ5LXRva2VuLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vbGliL3V0aWxzL2dldC1pbnN0YW5jZS1ieS10b2tlbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7O0dBTUc7QUFHSCxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSw4Q0FBOEMsQ0FBQztBQUVsRixPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUN4RSxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFOUMsTUFBTSxVQUFVLGtCQUFrQixDQUFPLEtBQTBDO0lBQ2pGLE1BQU0sV0FBVyxHQUFHLGtCQUFrQixDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDM0QsTUFBTSxVQUFVLEdBQWtDLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNoRixnQkFBZ0IsQ0FBQyxLQUFLLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFFcEMsT0FBTyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsUUFBUSxDQUFPLFdBQVcsQ0FBQyxDQUFDO0FBQ3pELENBQUM7QUFFRCxTQUFTLGdCQUFnQixDQUN2QixLQUEwQyxFQUMxQyxVQUF5QztJQUV6QyxJQUFJLENBQUMsVUFBVTtRQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsbUNBQW1DLEtBQUssQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDM0YsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBbmRyZXkgQ2hhbGtpbiA8TDJqTGlnYUBnbWFpbC5jb20+IChodHRwczovL2dpdGh1Yi5jb20vTDJqTGlnYSkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9naXRodWIuY29tL0wyakxpZ2EvZmFzdGlmeS1kZWNvcmF0b3JzL2Jsb2IvbWFzdGVyL0xJQ0VOU0VcbiAqL1xuXG5pbXBvcnQgdHlwZSB7IENvbnN0cnVjdG9yIH0gZnJvbSAnLi4vZGVjb3JhdG9ycy9oZWxwZXJzL2luamVjdC1kZXBlbmRlbmNpZXMuanMnO1xuaW1wb3J0IHsgY2xhc3NMb2FkZXJGYWN0b3J5IH0gZnJvbSAnLi4vZGVjb3JhdG9ycy9oZWxwZXJzL2luamVjdC1kZXBlbmRlbmNpZXMuanMnO1xuaW1wb3J0IHR5cGUgeyBJbmplY3RhYmxlU2VydmljZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvaW5qZWN0YWJsZS1jbGFzcy5qcyc7XG5pbXBvcnQgeyBfaW5qZWN0YWJsZXNIb2xkZXIgfSBmcm9tICcuLi9yZWdpc3RyeS9faW5qZWN0YWJsZXMtaG9sZGVyLmpzJztcbmltcG9ydCB7IENSRUFUT1IgfSBmcm9tICcuLi9zeW1ib2xzL2luZGV4LmpzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEluc3RhbmNlQnlUb2tlbjxUeXBlPih0b2tlbjogc3RyaW5nIHwgc3ltYm9sIHwgQ29uc3RydWN0b3I8VHlwZT4pOiBUeXBlIHtcbiAgY29uc3QgY2xhc3NMb2FkZXIgPSBjbGFzc0xvYWRlckZhY3RvcnkoX2luamVjdGFibGVzSG9sZGVyKTtcbiAgY29uc3QgaW5qZWN0YWJsZTogSW5qZWN0YWJsZVNlcnZpY2UgfCB1bmRlZmluZWQgPSBfaW5qZWN0YWJsZXNIb2xkZXIuZ2V0KHRva2VuKTtcbiAgdmVyaWZ5SW5qZWN0YWJsZSh0b2tlbiwgaW5qZWN0YWJsZSk7XG5cbiAgcmV0dXJuIGluamVjdGFibGVbQ1JFQVRPUl0ucmVnaXN0ZXI8VHlwZT4oY2xhc3NMb2FkZXIpO1xufVxuXG5mdW5jdGlvbiB2ZXJpZnlJbmplY3RhYmxlPFR5cGU+KFxuICB0b2tlbjogc3RyaW5nIHwgc3ltYm9sIHwgQ29uc3RydWN0b3I8VHlwZT4sXG4gIGluamVjdGFibGU6IEluamVjdGFibGVTZXJ2aWNlIHwgdW5kZWZpbmVkLFxuKTogYXNzZXJ0cyBpbmplY3RhYmxlIGlzIEluamVjdGFibGVTZXJ2aWNlIHtcbiAgaWYgKCFpbmplY3RhYmxlKSB0aHJvdyBuZXcgRXJyb3IoYEluamVjdGFibGUgbm90IGZvdW5kIGZvciB0b2tlbiBcIiR7dG9rZW4udG9TdHJpbmcoKX1cImApO1xufVxuIl19